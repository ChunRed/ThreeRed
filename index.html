<!DOCTYPE html>
<html>
  <head>
    <!-- p5 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/addons/p5.sound.min.js"></script>

    <!-- three -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r126/three.min.js" integrity="sha512-n8IpKWzDnBOcBhRlHirMZOUvEq2bLRMuJGjuVqbzUJwtTsgwOgK5aS0c1JA647XWYfqvXve8k3PtZdzpipFjgg==" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/three@0.126.0/examples/js/loaders/GLTFLoader.js"></script>

    <!-- bootstrap css-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    

    <meta charset="utf-8" />
    <title>3Dmodel Demo</title>
    <style>
      canvas{
        position: relative;
        
        width:100%;
      }
    </style>
  </head>
  

  <body>
    <div class="container">
      
      <div class="row">
        <div class="col text-center"> <h2>Three.js Init</h2></div>
      </div>

      <div class="row">
        <div class="col">
          <canvas id="myCanvas"></canvas>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <p class="text-center">The goal of this section is to give a brief introduction to three.js. We will start by setting up a scene, with a spinning cube. A working example is provided at the bottom of the page in case you get stuck and need help.</p>
        </div>
      </div>

    </div>

    <script >

      // 创建场景
      let renderer;
      let camera;
      let cube, md;
      let ambLight;
      let spotLight;
      let scene = new THREE.Scene();
      
      
      function init(){

        //light
        ambLight = new THREE.AmbientLight(0x404040);
        spotLight = new THREE.SpotLight(0xffffff)
        spotLight.position.set( 100, 1000, 200 );

        // 创建相机
        camera = new THREE.PerspectiveCamera(75, (window.innerHeight)/(window.innerHeight), 0.1, 1000);
        camera.position.z = 3;
        
        

        // 创建渲染器
        renderer= new THREE.WebGLRenderer({canvas: document.getElementById("myCanvas"),
        antialias: false});
        renderer.setClearColor(new THREE.Color(0xFFFFFF));
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        renderer.setPixelRatio(window.devicePixelRatio);

        // 创建立方体
        var geometry = new THREE.BoxGeometry(1, 1, 1);
        let material = new THREE.MeshPhongMaterial({
          color: 0x00FF00
        })
        cube = new THREE.Mesh(geometry, material);

        var loader = new THREE.GLTFLoader();
            
        loader.load( '../model.glb', function ( gltf )
        {
            md = gltf.scene;
        } );
      }    
      function animate() {

        requestAnimationFrame( animate ); 

        cube.rotation.x += 0.01; 
        cube.rotation.y += 0.02;
        md.rotation.x += 0.01; 
        md.rotation.y += 0.02;
        render();
        
      }
      function render(){
        //scene.add(cube);
        scene.add(ambLight);
        scene.add(spotLight);
        scene.add(md);
        renderer.render( scene, camera );
      }
       
      init();
      animate();

    
    </script>
    

    

  </body>

</html>

